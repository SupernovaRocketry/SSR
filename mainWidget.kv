#:kivy 1.11.1
#: import MapView kivy.garden.mapview.MapView

<MainWidget>:
    FloatLayout:
        canvas:

            # Ambiente superior
            Color:
                rgb: 0, 0, 0
            Rectangle:
                size: self.size
            Color:
                rgb: .9, .9, .9
            Rectangle:
                size: int(self.parent.width), int(self.parent.height)*0.90
                pos: 0,0
            Color:
                rgb: .9, 0, 0
            Line:
                points: (0, 0.9*self.parent.height, self.parent.width, 0.9*self.parent.height)
                width: 5
            
            # Ambiente Lateral esquerdo
            Color:
                rgb: 0.8, 0.8, 0.8
            Rectangle:
                size: int(self.parent.width)*.25, int(self.parent.height)*0.85
                pos: int(self.parent.width)*.01,  int(self.parent.height)*0.03
            Color:
                rgb: .7 , .7, .7
            Line:
                points: (int(self.parent.width)*.01, int(self.parent.height)*0.03, int(self.parent.width)*0.01, int(self.parent.height)*0.88)
                width: 2
            Line:
                points: (int(self.parent.width)*.26, int(self.parent.height)*0.03, int(self.parent.width)*0.26, int(self.parent.height)*0.88)
                width: 2
            Line:
                points: (int(self.parent.width)*.01, int(self.parent.height)*0.03, int(self.parent.width)*0.26, int(self.parent.height)*0.03)
                width: 2
            Line:
                points: (int(self.parent.width)*.01, int(self.parent.height)*0.88, int(self.parent.width)*0.26, int(self.parent.height)*0.88)
                width: 2
            
            # Ambiente Superior booleano
            Color:
                rgb: .8, .8, .8
            Rectangle:
                size: int(self.parent.width)*.724, int(self.parent.height)*0.13
                pos: int(self.parent.width)*.27, int(self.parent.height)*0.75
            Color:
                rgb: .7, .7, .7
            Line:
                points: (int(self.parent.width)*.27, int(self.parent.height)*0.75, int(self.parent.width)*.994, int(self.parent.height)*0.75)
                width: 2
            Line:
                points: (int(self.parent.width)*.27, int(self.parent.height)*0.88, int(self.parent.width)*.994, int(self.parent.height)*0.88)
                width: 2
            Line:
                points: int(self.parent.width)*.27, int(self.parent.height)*0.75, int(self.parent.width)*.27, int(self.parent.height)*0.88
                width: 2
            Line:
                points: int(self.parent.width)*.994, int(self.parent.height)*0.75, int(self.parent.width)*.994, int(self.parent.height)*0.88
                width: 2

            # Ambiente Grafico
            Color:
                rgb: .8 ,.8 ,.8
            Rectangle:
                pos: int(self.parent.width)*.27, int(self.parent.height)*0.03
                size: int(self.parent.width)*.724,  int(self.parent.height)*0.70
            Color:
                rgb: .7, .7, .7
            Line:
                points: int(self.parent.width)*.27, int(self.parent.height)*0.03, int(self.parent.width)*.27, int(self.parent.height)*0.73
                width: 2
            Line:
                points: int(self.parent.width)*.27, int(self.parent.height)*0.03, int(self.parent.width)*.994, int(self.parent.height)*0.03
                width: 2
            Line:
                points: int(self.parent.width)*.994, int(self.parent.height)*0.03, int(self.parent.width)*.994, int(self.parent.height)*0.73
                width: 2
            Line:
                points: int(self.parent.width)*.27, int(self.parent.height)*0.73, int(self.parent.width)*.994, int(self.parent.height)*0.73
                width: 2

            # Borda Mapa em Tempo Real
            Color:
                rgb: .5, .5, .5
            Line:
                points: int(self.parent.width)*.32, int(self.parent.height)*0.05, int(self.parent.width)*.67, int(self.parent.height)*0.05
                width: 2
            Line:
                points: int(self.parent.width)*.32, int(self.parent.height)*0.05, int(self.parent.width)*.32, int(self.parent.height)*0.43
                width: 2
            Line:
                points: int(self.parent.width)*.67, int(self.parent.height)*0.05, int(self.parent.width)*.67, int(self.parent.height)*0.40
                width: 2
            Line:
                points: int(self.parent.width)*.40, int(self.parent.height)*0.40, int(self.parent.width)*.67, int(self.parent.height)*0.40
                width: 2
            Line:
                points: int(self.parent.width)*.40, int(self.parent.height)*0.40, int(self.parent.width)*.40, int(self.parent.height)*0.43
                width: 2
            Line:
                points: int(self.parent.width)*.40, int(self.parent.height)*0.43, int(self.parent.width)*.32, int(self.parent.height)*0.43
                width: 2
            Color:
                rgb: .9, .9, .9
            Rectangle:
                pos: int(self.parent.width)*.32, int(self.parent.height)*0.40
                size: int(self.parent.width)*.08,  int(self.parent.height)*0.03


            # Area reservada para medidor de Altitude
            Color:
                rgb: .5, .5, .5
            Line:
                points: int(self.parent.width)*.28, int(self.parent.height)*0.05, int(self.parent.width)*.31, int(self.parent.height)*0.05
                width: 2
            Line:
                points: int(self.parent.width)*.28, int(self.parent.height)*0.05, int(self.parent.width)*.28, int(self.parent.height)*0.71
                width: 2
            Line:
                points: int(self.parent.width)*.31, int(self.parent.height)*0.05, int(self.parent.width)*.31, int(self.parent.height)*0.71
                width: 2
            Line:
                points: int(self.parent.width)*.28, int(self.parent.height)*0.71, int(self.parent.width)*.31, int(self.parent.height)*0.71
                width: 2
            Color:
                rgb: .9, .9, .9
            Rectangle:
                pos: int(self.parent.width)*.28, int(self.parent.height)*0.68
                size: int(self.parent.width)*.03,  int(self.parent.height)*0.03

            Color:
                rgb: 0, 0, 0, 1
            Rectangle:
                pos: int(self.parent.width)*.28, int(self.parent.height)*0.05
                size: int(self.parent.width)*.03,  int(self.parent.height)*0.63
            

            # Gráfico de Trajetoria 2D
            Color:
                rgb: .5, .5, .5
            Line:
                points: int(self.parent.width)*.32, int(self.parent.height)*0.44, int(self.parent.width)*.67, int(self.parent.height)*0.44
                width: 2
            Line:
                points: int(self.parent.width)*.32, int(self.parent.height)*0.44, int(self.parent.width)*.32, int(self.parent.height)*0.71
                width: 2
            Line:
                points: int(self.parent.width)*.67, int(self.parent.height)*0.44, int(self.parent.width)*.67, int(self.parent.height)*0.68
                width: 2
            Line:
                points: int(self.parent.width)*.32, int(self.parent.height)*0.71, int(self.parent.width)*.38, int(self.parent.height)*0.71
                width: 2
            Line:
                points: int(self.parent.width)*.38, int(self.parent.height)*0.71, int(self.parent.width)*.38, int(self.parent.height)*0.68
                width: 2
            Line:
                points: int(self.parent.width)*.38, int(self.parent.height)*0.68, int(self.parent.width)*.67, int(self.parent.height)*0.68
                width: 2
            Color:
                rgb: .9, .9, .9
            Rectangle:
                id: 'AreaTextoTrajetoria'
                pos: int(self.parent.width)*.32, int(self.parent.height)*0.68
                size: int(self.parent.width)*.06,  int(self.parent.height)*0.03
            Color:
                rgb: .7, .7, .7
            Rectangle:
                pos: int(self.parent.width)*.32, int(self.parent.height)*0.44
                size: int(self.parent.width)*.35,  int(self.parent.height)*0.24


            # Area para Giroscopio
            Color:
                rgb: .7, .7, .7
            Rectangle:
                pos: int(self.parent.width)*.68, int(self.parent.height)*0.05
                size: int(self.parent.width)*.305,  int(self.parent.height)*0.35
           


            
            
        

        # Dados ambiente superior
        Image:
            id: logo_supernova
            keep_ratio: True
            size_hint: .10, .1
            pos_hint: {'top': 1, 'left': 1}
            source: 'imgs/logo_supernova_branca.png'
        Button:
            background_normal: 'imgs/desconectado.png'
            size_hint: 0.08, 0.08
            pos_hint: {'top': .99, 'right':1}
            
        # Image:
        #     id: conectado
        #     size_hint: 0.08, 0.08
        #     pos_hint: {'top': .99, 'right':1}
        #     source: 'imgs/desconectado.png'
        BoxLayout:
            orientation:'horizontal'
            size_hint: .65, .10
            pos_hint: {'top': 1, 'x': .2 }
            Label:
                id: supervisorio
                text: 'SUPERVISÓRIO SUPERNOVA ROCKETRY'
                size_font: 32
            BoxLayout:
                orientation: 'vertical'
                Label:
                    id: eletronica
                    text: 'SETOR ELETRÔNICA'
                    size_font: 32
                Label:
                    id: data
                    text: '29/05/2021'
                    size_font: 14

        # Dados foguete
        BoxLayout:
            orientation:'vertical'
            size_hint: .25, .82
            pos_hint: {'x': 0.025, 'y': 0.05}
            Label:
                text: 'Dados Recebidos'
                bold: True
                text_size: self.size
                valign: 'top'
                halign: 'center'
                font_size: 32
                pos_hint: {'x': -0.07, 'y': 2}
                color: 0, 0, 0, 1
            BoxLayout:
                orientation:'vertical'
                valign: 'top'                     
                Label:
                    id: lb
                    text: "Altitude"
                    halign: 'left'
                    valign: 'top'
                    text_size: self.size
                    size_font: 20
                    color: 0, 0, 0, 1
                Label:
                    id: textAltitude
                    text: 'dadoAltitude'
                    halign: 'left'
                    valign: 'top'
                    text_size: self.size
                    size_font: 14
                    color: 0, 0, 0, 1
            BoxLayout:
                orientation:'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: "Latitude"
                        halign: 'left'
                        text_size: self.size
                        color: 0, 0, 0, 1                  
                    Label:
                        text: "dadoLatitude"
                        halign: 'left'
                        text_size: self.size
                        color: 0, 0, 0, 1
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: "Longitude"
                        halign: 'left'
                        text_size: self.size 
                        color: 0, 0, 0, 1                 
                    Label:
                        text: "dadoLongitude"
                        halign: 'left'
                        text_size: self.size
                        color: 0, 0, 0, 1
            BoxLayout:
                orientation:'vertical'
                valign: 'top'  
                Label:
                    text: 'Acelerometro'
                    halign: 'left'
                    text_size: self.size
                    color: 0, 0, 0, 1
                BoxLayout:
                    orientation:'horizontal'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'dadoX'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                        Label:
                            text: 'x'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'dadoY'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                        Label:
                            text: 'y'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                    BoxLayout:
                        orientation: 'vertical'
                        Label:
                            text: 'dadoZ'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                        Label:
                            text: 'z'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
            BoxLayout:
                orientation:'vertical'
                valign: 'top'  
                Label:
                    text: 'Giroscopio'
                    halign: 'left'
                    text_size: self.size
                    color: 0, 0, 0, 1
                BoxLayout:
                    orientation:'horizontal'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'dadoX'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                        Label:
                            text: 'x'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'dadoY'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                        Label:
                            text: 'y'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                    BoxLayout:
                        orientation: 'vertical'
                        Label:
                            text: 'dadoZ'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
                        Label:
                            text: 'z'
                            halign: 'left'
                            text_size: self.size
                            color: 0, 0, 0, 1
            BoxLayout:
                orientation:'vertical'
                Label:
                    text: "RSSI:"
                    halign: 'left'
                    text_size: self.size
                    color: 0, 0, 0, 1
                Label:
                    text: "dadoRSSI"
                    halign: 'left'
                    text_size: self.size
                    color: 0, 0, 0, 1

        # PARTE BOOLEANA
        BoxLayout:
            orientation:'horizontal'
            size_hint: (.724, .13)              # Tamanho baseado no tamanho da aba do supervosorio
            pos_hint: {'x': .27, 'y': .765}      # Tamanho baseado no tamanho da aba do supervosorio
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Paraquedas Estabilizador'
                    color: 0, 0, 0, 1
                    bold: True
                    font_size: 20
                    haling: 'center'
                BoxLayout:
                    orientation:'horizontal'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'Acionamento Principal'
                            valign: 'top'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'Acionamento Redundante'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'Acionamento Pion'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'  
            BoxLayout:
                orientation:'vertical'      
                Label:
                    text: 'Paraquedas Principal'
                    bold: True
                    font_size: 20
                    color: 0, 0, 0, 1
                BoxLayout:
                    orientation:'horizontal'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'Acionamento Principal'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: 'Acionamento Pion'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'
            BoxLayout:
                orientation:'vertical'
                Label:
                    text: 'Remove Before Flight'
                    color: 0, 0, 0, 1
                    font_size: 20
                    bold: True
                BoxLayout:
                    orientation:'horizontal'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: '1º'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: '2º'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'
                    BoxLayout:
                        orientation:'vertical'
                        Label:
                            text: '3º'
                            color: 0, 0, 0, 1
                        Image:
                            source: 'imgs/red_led.png'   
        MapView:
            pos_hint: {'x': .32, 'y': .05}
            size_hint: (.35, .35)
            lat: -21.785624346951103
            lon: -43.352172024699804
            double_tap_zoom: True
            zoom: 15
            MapMarkerPopup:
                lat: -21.785624346951103
                lon: -43.352172024699804

    FloatLayout:
        Label:
            text: 'Posição do foguete'
            font_size: 20
            color: 0, 0, 0, 1
            bold: True
            size_hint: None, None
            size: self.texture_size
            pos_hint: {'x': .325, 'y': .405}
        Label:
            text: 'Altitude'
            font_size: 20
            color: 0, 0, 0, 1
            bold: True
            size_hint: None, None
            size: self.texture_size
            pos_hint: {'x': .2815 , 'y':.685}
        # Label:
        #     text: 'Trajetória'
        #     font_size: 20
        #     color: 0, 0, 0, 1
        #     bold: True
        #     size_hint: None, None
        #     size: self.texture_size
        #     pos_hint: {'x': .325, 'y': .685}
        
    BoxLayout:
        orientation: 'vertical'
        pos_hint: {'x': .325, 'y': .685}
        size_hint: (.06, .03)  
        Label:
            text: 'Trajetória'
            #text_size: root.width, None
            fontsize: 20
            valign: 'bottom'
            haling: 'left'
            color: 0, 0, 0, 1
            bold: True
            size_hint: None, None
            size: self.texture_size
            # pos_hint: {'x': .325, 'y': .685}
        
    FloatLayout:
        Label:
            text:'aaaaaaaaaa'