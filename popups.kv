#:kivy 1.11.1

# <ConnectSocketPopup>:
#     title: 'Conexão Socket'
#     # size_hint_y: 0.3
#     # size_hint_x: 0.2
#     size_hint: None, None
#     size: (600, 375)
#     BoxLayout:
#         id: layout
#         orientation:'vertical'
#         GridLayout:
#             size_hint: (1, .8)
#             cols: 2
#             rows: 6
#             Label:
#                 text: "IP"
#                 font_size: 14
#             TextInput:
#                 id: txt_ip
#                 text: '127.0.0.1'
#                 font_size: 14
#                 halign: 'center'
#                 valign: 'middle'
#                 disabled: False
#             Label:
#                 text: "Port"
#                 font_size: 14
#             TextInput:
#                 id: txt_port
#                 text: '502'
#                 font_size: 14
#                 halign: 'center'
#                 valign: 'middle'
#                 disabled: False
#             Label:
#                 text: "Login"
#                 font_size: 14
#             TextInput:
#                 id: txt_login
#                 hint_text: 'login'
#                 font_size: 14
#                 halign: 'center'
#                 valign: 'middle'
#                 disabled: False
#             Label:
#                 text: "Senha"
#                 font_size: 14
#             TextInput:
#                 id: txt_senha
#                 hint_text: 'senha'
#                 font_size: 14
#                 halign: 'center'
#                 valign: 'middle'
#                 disabled: False
#             Label:
#                 text: 'Missão'
#                 font_size: 14
#             TextInput:
#                 id: txt_missao
#                 text: ''
#                 font_size: 14
#                 halign: 'center'
#                 valign: 'middle'
#                 disabled: False
#             Label:
#                 text: 'Apogeu'
#                 font_size: 14
#             Spinner:
#                 id: txt_apogeu
#                 text: "Selecione o apogeu"
#                 values: ['500', '1000', '3000', '5000']
#                 disabled: False

#         BoxLayout:
#             orientation:'horizontal'
#             size_hint: (1, .2)
#             Button:
#                 id: connButton
#                 size_hint_y: None
#                 height: 40
#                 text: 'Conectar'
#                 on_release:
#                     app.root._login = txt_login.text
#                     app.root._senha = txt_senha.text
#                     app.root._serverIP = txt_ip.text
#                     app.root._missao = txt_missao.text
#                     app.root._port = txt_port.text
#                     app.root._apogeu = txt_apogeu.text
#                     app.root.clickConnection()
#             Button:
#                 size_hint_y: None
#                 height: 40
#                 text:'Fechar'
#                 on_release: root.dismiss()


# <ConnectSocketPopup>:
#     title: 'Opções de conexão'
#     # size_hint_y: 0.3
#     # size_hint_x: 0.2
#     size_hint: None, None
#     size: (600, 375)
#     BoxLayout:
#         id: layout
#         orientation:'vertical'
#         GridLayout:
#             size_hint: (1, .8)
#             cols: 2
#             rows: 6
#             size_hint_y: 0.05
#             Label:
#                 text: "Conexão"
#                 font_size: 14
                
#             Spinner:
#                 id: opt_conexao
#                 text: "Comunicação"
#                 values: ['UART', 'WiFi']
#                 size_hint: (1, 0.25)
#                 disabled: False
#                 on_text: root.manager.current = self.text

#             # WindowManager:
#             #     id: window_manager
#             #     FirstWindow:
#             #         id: window_uart
#             #         Label:
#             #             text: "Teste"
#             #             font_size:14

            

#         BoxLayout:
#             orientation:'horizontal'
#             size_hint: (1, .2)
#             Button:
#                 id: connButton
#                 size_hint_y: None
#                 height: 40
#                 text: 'Conectar'
#                 on_release:
#                     app.root._login = txt_login.text
#                     app.root._senha = txt_senha.text
#                     app.root._serverIP = txt_ip.text
#                     app.root._missao = txt_missao.text
#                     app.root._port = txt_port.text
#                     app.root._apogeu = txt_apogeu.text
#                     app.root.clickConnection()
#             Button:
#                 size_hint_y: None
#                 height: 40
#                 text:'Fechar'
#                 on_release: root.dismiss()

    
<ConnectSocketPopup>:
    title: 'Opções de conexão'
    # size_hint_y: 0.3
    # size_hint_x: 0.2
    size_hint: None, None
    size: (600, 375)
    BoxLayout:
        id: layout
        orientation:'vertical'
        GridLayout:
            size_hint: (1, .8)
            cols: 2
            rows: 6
            # size_hint_y: 0.05
            Label:
                text: "Conexão"
                font_size: 14
                
            Spinner:
                id: opt_conexao
                text: "UART"
                values: ['UART', 'WiFi']
                disabled: True
                on_text: root.manager.current = self.text         
            Label:
                text: "Porta"
                font_size: 14
            TextInput:
                id: txt_porta
                text: ''
                font_size: 14
                halign: 'center'
                valign: 'middle'
                disabled: False
            Label:
                text: "Baudrate"
                font_size: 14
            TextInput:
                id: txt_baudrate
                text: ''
                font_size: 14
                halign: 'center'
                valign: 'middle'
                disabled: False
            Label:
                text: 'Missão'
                font_size: 14
            TextInput:
                id: txt_missao
                text: ''
                font_size: 14
                halign: 'center'
                valign: 'middle'
                disabled: False
            Label:
                text: 'Apogeu'
                font_size: 14
            Spinner:
                id: txt_apogeu
                text: "Selecione o apogeu"
                values: ['500', '1000', '3000', '5000']
                disabled: False
            

        BoxLayout:
            orientation:'horizontal'
            size_hint: (1, .2)
            Button:
                id: connButton
                size_hint_y: None
                height: 40
                text: 'Conectar'
                on_release:
                    app.root._porta = txt_porta.text
                    app.root._baudrate = txt_baudrate.text
                    app.root._missao = txt_missao.text
                    app.root._apogeu = txt_apogeu.text
                    app.root.clickConnection()
            Button:
                size_hint_y: None
                height: 40
                text:'Fechar'
                on_release: root.dismiss()


<ConnectSocketPopupError>:
    title: ""
    separator_height: 0
    size_hint: None, None
    size: (250, 100)
    BoxLayout:
        orientation: 'vertical'
        Button:
            id: erroConnect
            background_color: 0, 0, 0, 0
            size_hint_y: None
            height: 40
            text: "Falha ao conectar!"
            font_size: 14
            halign: "center"
            valign: "middle"
        Button:
            size_hint_y: None
            height: 40
            text: "Fechar"
            halign: "center"
            valign: "middle"
            on_release: root.dismiss()



<ConfiguraGraficosPopup>:
    title: 'Configuração dos Gráficos'
    size_hint_y: 0.3
    size_hint_x: 0.2
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.7
            size_hint_x: 1
            LabeledChedBoxDataGraph:
                id: mp20
                on_kv_post:
                    self.ids.label.text = '20'
                    self.ids.checkbox.group = 'cb_group'
            LabeledChedBoxDataGraph:
                id: mp50
                on_kv_post:
                    self.ids.label.text = '50'
                    self.ids.checkbox.group = 'cb_group'
            LabeledChedBoxDataGraph:
                id: mp20
                on_kv_post:
                    self.ids.label.text = '100'
                    self.ids.checkbox.group = 'cb_group'
        Button:
            text: 'Fechar'
            size_hint: (0.2, 1)
            on_relase: root.dismiss()


<LabeledChedBoxDataGraph>:
    orientation: 'horizontal'
    size_hint: (0.1, 1)
    CheckBox:
        id: checkbox
        on_active: app.root._graphAltitude.ids.graphAltitude.setMaxPoints(int(label.text), 0) if app.root is not None else None
    Label:
        id: label

<UARTConnect>:
    title: 'Opções de conexão'
    size_hint: None, None
    size: (600, 375)
    BoxLayout:
        id: layout
        orientation:'vertical'
        GridLayout:
            size_hint: (1, .8)
            cols: 2
            rows: 6
            size_hint_y: 0.05
            Label:
                text: "Conexão"
                font_size: 14
                
            Spinner:
                id: opt_conexao
                text: "UART"
                values: ['UART', 'WiFi']
                size_hint: (1, 0.25)
                disabled: False

            Label:
                text: "Porta"
                font_size: 14

